<html xmlns:th="http://www.thymeleaf.org">
<!DOCTYPE html>
<html lang="en">
  <head>
  	<link rel="shortcut icon" href="resources/img/favicon.ico">
    <title>레시피</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,700;0,800;1,200;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="resources/css/animate.css">
    <link rel="stylesheet" href="resources/css/owl.carousel.min.css">
    <link rel="stylesheet" href="resources/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="resources/css/magnific-popup.css">
    <link rel="stylesheet" href="resources/css/flaticon.css">
    <link rel="stylesheet" href="resources/css/style.css">
    
    <!-- Noto Sans 추가 -->
    <link rel="stylesheet" href="resources/css/NotoSans.css">
    <style>
    	strong{
    		font-weight : bold;
    	}
    	.product-details .price span{
   		    font-size: 15px;
		    font-family: 'Noto Sans';
		    font-weight: lighter;
		    letter-spacing: -0.3px;
    	}
    	.ingre{
   		    font-size: 16px;
    		
    	}
    	.img-fluid {
    		height : 100%;
    	}
    	/*.ftco-navbar-light {
    		background: black !important;
    	}*/
    	#chartBox{
    		width : 500px;
    		height : 600px;
    		margin : 0 auto;
    		margin-top : 70px;
    	}
    	#v-pills-tabContent{
    		background-color : white !important;
    	}
    	
    	#recipeCon{
		    margin-bottom:100px; 
   		    font-family: 'Noto Sans';
		    font-weight: normal;
		    font-size: 15px;
		    color: #3e3e3e;
    	}
    	#fdName2{
    		margin-top:50px; 
    		margin-bottom:50px;
    	}
    	#recipe{
    		width: 370px;
		    text-align: center;
		    margin: 0 auto;
    	}
    	#ideaIcon{
   		    width: 150px;
		    height: 150px;
		    margin-bottom: 20px;
    	}
    	
    	.starO i{
    		font-size:30px;
    		cursor:pointer;
    	}
    	
    	#starRev{
    		padding: 10px 0;
    	}
    </style>
  </head>
  <body>
  <!-- 수정 -->
 
    <th:block th:include="includes/header :: header"></th:block>

    <!-- END nav -->
    
    <section class="hero-wrap hero-wrap-2" style="background-image: url('resources/images/bg_2.jpg');" data-stellar-background-ratio="0.5">
      <div class="overlay"></div>
      <div class="container">
        <div class="row no-gutters slider-text align-items-end justify-content-center">
          <div class="col-md-9 ftco-animate mb-5 text-center">
          	<p class="breadcrumbs mb-0"><span class="mr-2"><a href="index.do">Home <i class="fa fa-chevron-right"></i></a></span> <span><a href="r_theme.do">테마추천 <i class="fa fa-chevron-right"></i></a></span> <span>레시피</i></span></p>
            <h2 class="mb-0 bread">레시피</h2>
          </div>
        </div>
      </div>
    </section>

    <section class="ftco-section">
    	<div class="container">
    		<div class="row">
    			<div class="col-lg-6 mb-5 ftco-animate">
    				<a th:href="@{${fdImg}}" class="image-popup prod-img-bg">
    					<img th:src="@{${fdImg}}" class="img-fluid" alt="Colorlib Template" style="width: 100%;">
    				</a>
    			</div>
    			<div class="col-lg-6 product-details pl-md-5 ftco-animate">
    			<form action="setCart">
    				<h3 th:text="${fdName}"></h3>
    				<div class="rating d-flex">
							<p class="text-left mr-4">
								<a href="#" class="mr-2">난이도</a>
								<a href="#"><span class="fa fa-star"></span></a>
								<a href="#"><span class="fa fa-star"></span></a>
								<a href="#"><span class="fa fa-star"></span></a>
							</p>
							<p class="text-left mr-4">
								<a href="#" class="mr-2" style="color: #000;">소요시간 <span style="color: #bbb;">20분</span></a>
							</p>
						</div>
    				<p class="price"><span th:text="${recipeEtc}"></span></p>
    				<p class="ingre"><strong>주재료</strong></p>
    					<th:block th:each="main : ${mainIngre}">
    						<span th:text="${main}" style="color:#0c0c0c;"></span>
    						<span>&nbsp;</span>
    					</th:block>
    				<p class="ingre"><strong>부재료</strong></p>
    				<th:block th:each="sub : ${subIngre}">
    						<span th:text="${sub}" style="color:#0c0c0c;"></span>
    						<span>&nbsp;</span>
    					</th:block>
    				
    				<!-- <p class="ingre"><strong>주재료</strong></p>
						<p th:text="${mainIngre}" style="color:#0c0c0c;">주재료</p>
    				<p class="ingre"><strong>부재료</strong></p>
						<p th:text="${subIngre}" style="color:#0c0c0c;">부재료</p> -->

						
						<div class="row mt-4">
							<div class="input-group col-md-6 d-flex mb-3">
	             	<span class="input-group-btn mr-2">
	                	<button type="button" class="quantity-left-minus btn"  data-type="minus" data-field="">
	                   <i class="fa fa-minus"></i>
	                	</button>
	            		</span>
	             	<input type="text" id="quantity" name="quantity" class="quantity form-control input-number" value="1" min="1" max="100">
	             	<span class="input-group-btn ml-2">
	                	<button type="button" class="quantity-right-plus btn" data-type="plus" data-field="">
	                     <i class="fa fa-plus"></i>
	                 </button>
	             	</span>
	          	</div>
	          	<div class="w-100"></div>
          	</div>
          	<input type="hidden" th:value="${fdName}" name="fdName" for="fdName" id="fdName">
          	<p>
	          	<input type="submit" class="btn btn-primary py-3 px-5 mr-2" value="장바구니">
          		<a href="checkout.do" class="btn btn-primary py-3 px-5">결제하기</a>
          	</p>
    			</form>
    			</div>
    		</div>




    		<div class="row mt-5">
          <div class="col-md-12 nav-link-wrap">
            <div class="nav nav-pills d-flex text-center" id="v-pills-tab" role="tablist" aria-orientation="vertical">
              <a class="nav-link ftco-animate active mr-lg-1" id="v-pills-1-tab" data-toggle="pill" href="#v-pills-1" role="tab" aria-controls="v-pills-1" aria-selected="true">레시피</a>

              <a class="nav-link ftco-animate mr-lg-1" id="v-pills-2-tab" data-toggle="pill" href="#v-pills-2" role="tab" aria-controls="v-pills-2" aria-selected="false">영양정보</a>

              <a class="nav-link ftco-animate" id="v-pills-3-tab" data-toggle="pill" href="#v-pills-3" role="tab" aria-controls="v-pills-3" aria-selected="false">Reviews</a>

            </div>
          </div>
          <div class="col-md-12 tab-wrap">
            
            <div class="tab-content bg-light" id="v-pills-tabContent">

              <div class="tab-pane fade show active" id="v-pills-1" role="tabpanel" aria-labelledby="day-1-tab">
              	<div class="p-4">
              	  <div id="recipe">
	              	<h3 id="fdName2" th:text="${fdName}+' 만들기'">음식이름</h3>
	              	<th:block th:each="recipe : ${recipe} ">
	              		<th:block th:if="${recipe.recipeImg!=''}">
	              			<img th:src="@{resources/}+${recipe.recipeImg}" style="margin-bottom:100px; width:370px; height:350px;">
	              		</th:block>
	              		<th:block th:if="${recipe.recipeImg==''}">
	              			<img id="ideaIcon" src="resources/img/ideaIcon.png">
	              		</th:block>
	              		<p th:text="${recipe.recipeContent}" id="recipeCon"></p>
	              	 </th:block>
	              </div>
              	</div>
              </div>

              <div class="tab-pane fade" id="v-pills-2" role="tabpanel" aria-labelledby="v-pills-day-2-tab">
              	<div class="p-4">
	              	<h3 class="mb-4" th:text="|${fdName} 영양정보|"></h3>
	              	<p th:text="|${fdName} 칼로리 : ${cal}|"></p>
	              	<div id="chartBox"><canvas id="radarChart"></canvas></div>
              	</div>
              </div>
              <div class="tab-pane fade" id="v-pills-3" role="tabpanel" aria-labelledby="v-pills-day-3-tab">
              	<div class="row p-4">
						   		<div class="col-md-7">
						   			<h3 class="mb-4">3 Reviews</h3>
						   			<div class="review">
								   		<div class="user-img" style="background-image: url(resources/images/person_1.png)"></div>
								   		<div class="desc">
								   			<h4>
								   				<span class="text-left">김진웅웅</span>
								   				<span class="text-right">25 April 2020</span>
								   			</h4>
								   			<p class="star">
								   				<span>
								   					<i class="fa fa-star"></i>
								   					<i class="fa fa-star"></i>
								   					<i class="fa fa-star"></i>
								   					<i class="fa fa-star"></i>
								   					<i class="fa fa-star"></i>
							   					</span>
							   					<span class="text-right"><a href="#" class="reply"><i class="icon-reply"></i></a></span>
								   			</p>
								   			<p>이거진짜욘나맛있음 ! !</p>
								   		</div>
								   	</div>
								   	<div class="review">
								   		<div class="user-img" style="background-image: url(resources/images/person_1.png)"></div>
								   		<div class="desc">
								   			<h4>
								   				<span class="text-left">위상상윤</span>
								   				<span class="text-right">25 April 2020</span>
								   			</h4>
								   			<p class="star">
								   				<span>
								   					<i class="fa fa-star"></i>
								   					<i class="fa fa-star"></i>
								   					<i class="fa fa-star"></i>
								   					<i class="fa fa-star"></i>
								   					<i class="fa fa-star-O"></i>
							   					</span>
							   					<span class="text-right"><a href="#" class="reply"><i class="icon-reply"></i></a></span>
								   			</p>
								   			<p>나 아직도 크롤링 하는중 ㅋㅋ</p>
								   		</div>
								   	</div>
								   	<div class="review">
								   		<div class="user-img" style="background-image: url(resources/images/person_1.png)"></div>
								   		<div class="desc">
								   			<h4>
								   				<span class="text-left">정정소연</span>
								   				<span class="text-right">25 April 2020</span>
								   			</h4>
								   			<p class="star">
								   				<span>
								   					<i class="fa fa-star"></i>
								   					<i class="fa fa-star"></i>
								   					<i class="fa fa-star"></i>
								   					<i class="fa fa-star"></i>
								   					<i class="fa fa-star"></i>
							   					</span>
							   					<span class="text-right"><a href="#" class="reply"><i class="icon-reply"></i></a></span>
								   			</p>......</p>
								   		</div>
								   	</div>
						   		</div>
						   		<!-- 리뷰작성 폼 -->
						   		<div class="col-md-4">
						   			<div class="rating-wrap">
						   				<form action="IngreRevInsert" method="post">
						   					<div class="form-group">
							                  
							                  <label for="contents" style="display:block; font-size: 30px; color: #0c0c0c;">리뷰작성</label>
							                  <div id="starRev">
								                  <label for="contents" style="color: #0c0c0c; font-size:20px;">별점 </label>
									                  <span class="starO starO1" onclick="starScore(1)"><i class="fa fa-star-o"></i></span>
									                  <span class="starO starO2" onclick="starScore(2)"><i class="fa fa-star-o"></i></span>
									                  <span class="starO starO3" onclick="starScore(3)"><i class="fa fa-star-o"></i></span>
									                  <span class="starO starO4" onclick="starScore(4)"><i class="fa fa-star-o"></i></span>
									                  <span class="starO starO5" onclick="starScore(5)"><i class="fa fa-star-o"></i></span>
								                  <input type="hidden" name="reviewScore" value="1" id="reviewScore">
							                  </div>
							                  <label for="contents" style="color: #0c0c0c;">식재료 : </label>
							                  <input type="text" placeholder="식재료 이름을 적어주세요" name="CrawlFoodName" style="width: 280px; margin-bottom: 15px;">
							                  <textarea name="reviewContent" id="message" cols="30" rows="5" class="form-control"></textarea>
							                </div>
						   					<div class="form-group">
						   						<input type="hidden" name="fdName" th:value="${fdName}">
							                  <input type="submit" value="Post Comment" class="btn py-3 px-4 btn-primary">
							                </div>
						   				</form>
						   			</div>
						   		</div>
						   		<!-- 리뷰작성 폼 end -->
						   		<!-- <div class="col-md-4">
						   			<div class="rating-wrap">
							   			<h3 class="mb-4">Give a Review</h3>
							   			<p class="star">
							   				<span>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					(98%)
						   					</span>
						   					<span>20 Reviews</span>
							   			</p>
							   			<p class="star">
							   				<span>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					(85%)
						   					</span>
						   					<span>10 Reviews</span>
							   			</p>
							   			<p class="star">
							   				<span>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					(98%)
						   					</span>
						   					<span>5 Reviews</span>
							   			</p>
							   			<p class="star">
							   				<span>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					(98%)
						   					</span>
						   					<span>0 Reviews</span>
							   			</p>
							   			<p class="star">
							   				<span>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					<i class="fa fa-star"></i>
							   					(98%)
						   					</span>
						   					<span>0 Reviews</span>
							   			</p>
							   		</div>
						   		</div> -->
						   	</div>
              </div>
            </div>
          </div>
        </div>
    	</div>
    </section>

	<th:block th:include="includes/footer :: footer"></th:block>
    
  

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


  <script src="resources/js/jquery.min.js"></script>
  <script src="resources/js/jquery-migrate-3.0.1.min.js"></script>
  <script src="resources/js/popper.min.js"></script>
  <script src="resources/js/bootstrap.min.js"></script>
  <script src="resources/js/jquery.easing.1.3.js"></script>
  <script src="resources/js/jquery.waypoints.min.js"></script>
  <script src="resources/js/jquery.stellar.min.js"></script>
  <script src="resources/js/owl.carousel.min.js"></script>
  <script src="resources/js/jquery.magnific-popup.min.js"></script>
  <script src="resources/js/jquery.animateNumber.min.js"></script>
  <script src="resources/js/scrollax.min.js"></script>
  <script src="resources/js/main.js"></script>
  <!-- chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.6.0/dist/chart.min.js"></script>
  <!-- <script src="js/g_radarChart.js"></script> -->
  <script>
	//1) chart를 세팅할 수 있는 canvas 태그 가져오기
	let radarChart = document.getElementById('radarChart')
	let fdName = $("#fdName").val();
	//2) chart 생성
	//2-1) 데이터 준비
	//============임의의 데이터를 생성하는 함수를 만들어 봄!================
	function random(){
		return Math.round(Math.random()*100)
	}
	
	function randomData(){
		return [
			random(),
			random(),
			random(),
			random(),
			random()
		]
	}
	//============임의의 데이터를 생성하는 함수를 만들어 봄!================
	$(document).ready(()=>{
		loadNutri();
	});
	function loadNutri(){
		$.ajax({
			url:"showNutri",
			data:{"fdName":fdName},
			type : "get",
			success : showNutri,
		});
	}
	function showNutri(nutriList){
		let radarCht =  new Chart(radarChart,{
			type : 'radar',
			data : {
				labels : ['탄수화물', '단백질', '지방', '무기질', '비타민'],
			  	datasets: [{
				    label:fdName,
				    data: [nutriList[0],nutriList[1],nutriList[2],nutriList[3],nutriList[4]],
				    fill: true,
				    backgroundColor: 'rgba(255, 80, 0, 0.7)',
				    borderColor: 'rgb(255, 80, 0)',
				    pointBackgroundColor: 'rgb(255, 80, 0)',
				    pointBorderColor: '#fff',
				    pointHoverBackgroundColor: '#fff',
				    pointHoverBorderColor: 'rgb(255, 80, 0)'
				  }]
			},
			options : {
				elements : {
					line: {
				        borderWidth: 1
				      }
				}
				
			}
			
			
		});
	}
	
	function starScore(score){
		let scoreVal = $("#reviewScore");
		
		let starO1 = $(".starO1");
		let starO2 = $(".starO2");
		let starO3 = $(".starO3");
		let starO4 = $(".starO4");
		let starO5 = $(".starO5");
		let star = `<i class="fa fa-star" style="color: #b7472a;"></i>`;
		let starO = `<i class="fa fa-star-o">`;
		if(score == 1){
			starO1.html(star);
			starO2.html(starO);
			starO3.html(starO);
			starO4.html(starO);
			starO5.html(starO);
			
			scoreVal.val("1");
			
		}else if(score == 2){
			starO1.html(star);
			starO2.html(star);
			starO3.html(starO);
			starO4.html(starO);
			starO5.html(starO);
			
			scoreVal.val("2");
			
		}else if(score == 3){
			starO1.html(star);
			starO2.html(star);
			starO3.html(star);
			starO4.html(starO);
			starO5.html(starO);
			
			scoreVal.val("3");
			
		}else if(score == 4){
			starO1.html(star);
			starO2.html(star);
			starO3.html(star);
			starO4.html(star);
			starO5.html(starO);
			
			scoreVal.val("4");
			
		}else if(score == 5){
			starO1.html(star);
			starO2.html(star);
			starO3.html(star);
			starO4.html(star);
			starO5.html(star);
			
			scoreVal.val("5");
			
		}
	}
  
  </script>

  <script>
		$(document).ready(function(){

		var quantitiy=0;
		   $('.quantity-right-plus').click(function(e){
		        
		        // Stop acting like a button
		        e.preventDefault();
		        // Get the field name
		        var quantity = parseInt($('#quantity').val());
		        
		        // If is not undefined
		            
		            $('#quantity').val(quantity + 1);

		          
		            // Increment
		        
		    });

		     $('.quantity-left-minus').click(function(e){
		        // Stop acting like a button
		        e.preventDefault();
		        // Get the field name
		        var quantity = parseInt($('#quantity').val());
		        
		        // If is not undefined
		      
		            // Increment
		            if(quantity>0){
		            $('#quantity').val(quantity - 1);
		            }
		    });
		    
		});
	</script>
    
  </body>
</html>